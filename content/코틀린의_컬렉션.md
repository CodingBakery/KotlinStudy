# ì½”í‹€ë¦°ì˜ ì»¬ë ‰ì…˜

### immutable / mutable

valê³¼ varë¡œ ì„ ì–¸í•˜ëŠ” ë³€ìˆ˜ì— ë”°ë¼ ë¶ˆë³€í˜•/ê°€ë³€í˜• ë³€ìˆ˜ë¡œ ë‚˜ë‰˜ë“¯ì´, ì½”í‹€ë¦°ì˜ ëª¨ë“  ì»¬ë ‰ì…˜ì€ ë¶ˆë³€í˜•(immutable)ê³¼ ê°€ë³€í˜•(mutable) ìœ¼ë¡œ ë‚˜ë‰œë‹¤.
immutableì€ ì½ê¸°ì „ìš©(read-only), mutableì€ ë³€ê²½ ê°€ëŠ¥(read&write)

| Collection | immutable | mutable |
| --- | --- | --- |
| List | listOf | mutableListOf, arrayListOf |
| Set | setOf | mutableSetOf, hashSetOf, linkedSetOf, sortedSetOf |
| Map | mapOf | mutableMapOf, hashMapOf, linkedMapOf, sortedMapOf |

ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ ë¶ˆë³€í˜• valì„ ê¶Œì¥í•˜ë“¯ì´, ì»¬ë ‰ì…˜ë„ immutableì„ ê¶Œì¥í•œë‹¤.

> 
> 
> 
> <aside>
> ğŸ’¡ ë³´í†µ Listì™€ ê°™ì€ ì»¬ë ‰ì…˜ì€ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³  listOf() ì™€ ê°™ì€ íŠ¹ì • í•¨ìˆ˜ì˜ ë„ì›€ì„ í†µí•´ ìƒì„±í•˜ëŠ”ë° ì´ëŸ¬í•œ í•¨ìˆ˜ë¥¼ í—¬í¼(Helper)í•¨ìˆ˜ë¼ê³  í•œë‹¤.
> 
> </aside>
> 

mutable ì»¬ë ‰ì…˜ì€ add()ë‚˜ remove() ê°™ì€ ìš”ì†Œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì§€ì›í•œë‹¤.

---

### List

**ë¶ˆë³€í˜• List**

```kotlin
var numbers: List<Int> = listOf(1, 2, 3, 4, 5)

// ì œë„¤ë¦­ ìƒëµí•˜ë©´ <Any>ê°€ ë˜ê³ , ì„œë¡œ ë‹¤ë¥¸ ìë£Œí˜•ì„ ë‹´ì„ ìˆ˜ ìˆë‹¤.
var mixedTypes = listOf("hello", 1, 3.14, 's')

// ì»¬ë ‰ì…˜ì— .indices ë©¤ë²„ë¥¼ ì¶”ê°€í•˜ì—¬ ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼ ê°€ëŠ¥
for (index in mixedTypes.indices) {
        println("mixedTypes[$index] = ${mixedTypes[index]}")
    }

// ë¹ˆ List ìƒì„± - ì œë„¤ë¦­ ì„ ì–¸ í•„ìˆ˜
var emptyList: List<String> = emptyList()

// nullì„ ì œì™¸í•œ ìš”ì†Œë¡œ List ìƒì„±
var nonNullList: List<Int> = listOfNotNull(1, 24, 2, null, 5, null)
```

**ê°€ë³€í˜• List**

```kotlin
// arryaListOf()ëŠ” ìë°”ì˜ ArrayListê°€ ë°˜í™˜ëœë‹¤.
val stringList: ArrayList<String> = arrayListOf("Hello", "World", "Evelyn")
stringList.add("Bye") // ì¶”ê°€
stringList.remove("Hello") // ì‚­ì œ
println(stringList)

// mutablList - ë§ˆì°¬ê°€ì§€ë¡œ ì¶”ê°€/ì‚­ì œ ê°€ëŠ¥
val mutableList: MutableList<String> = mutableListOf("apple", "banana", "cherry")
```

ë¶ˆë³€í˜• Listë¥¼ ê°€ë³€í˜•ìœ¼ë¡œ ë³€ê²½

```kotlin
val names: List<String> = listOf("one", "two", "three")
val mutableNames = names.toMutableList() // ìƒˆë¡œìš´ ê°€ë³€í˜• Listê°€ ë§Œë“¤ì–´ì§
mutableList.add("four")
println("names : $names")
println("mutableNames : $mutableNames")
// names : [one, two, three]
// mutableNames : [one, two, three, four]
```

---

### Set , Map

**ë¶ˆë³€í˜• Set**

```kotlin
val intSet: Set<Int> = setOf(1, 5, 5)
val mixedTypesSet = setOf("Hello", 5, 3.14, 'x') // ìë£Œí˜• í˜¼í•©
```

**ê°€ë³€í˜• Set**

```kotlin
// mutableSetOf()ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ìë°”ì˜ LinkedHashSetì„ ë§Œë“¤ì–´ë‚¸ë‹¤.
val animals = mutableSetOf("dog", "cat", "rabbit", "lion")
animals.add("turtle")
animals.remove("rabbit")
animals.clear()

// hashSetOf() -> java.util.HashSet
// sortedSetOf() -> java.util.TreeSet
// linkedSetOf() -> java.util.LinkedHashSet
```

**ë¶ˆë³€í˜• Map**

```kotlin
val langMap: Map<Int, String> = mapOf(11 to "Java", 22 to "Kotlin", 33 to "C++")
println("langMap[22] = ${langMap[22]}")
println("langMap.get(22) = ${langMap.get(22)}")
println("langMap.keys = ${langMap.keys}")
```

**ê°€ë³€í˜• Map**

```kotlin
val capitalCityMap: MutableMap<String, String> 
= mutableMapOf("Korea" to "Seoul", "China" to "Beijing", "Japan" to "Tokyo")
capitalCityMap.put("UK", "London")
capitalCityMap.remove("China")

// hashMapOf() -> java.util.HashMap
// sortedMapOf() -> java.util.SortedMap
// linkedMapOf() -> java.util.LinkedHashMap
```

---

### ì»¬ë ‰ì…˜ì˜ í™•ì¥í•¨ìˆ˜

ì½”í‹€ë¦°ì—ì„œëŠ” ìë°”ì˜ ìŠ¤íŠ¸ë¦¼ í•¨ìˆ˜ì™€ ê°™ì€ ìœ ì‚¬í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” í•¨ìˆ˜ë“¤ì„  **í™•ì¥í•¨ìˆ˜**ë¡œ ì œê³µí•œë‹¤.

ì´ëŸ¬í•œ í•¨ìˆ˜ë¥¼ í™œìš©í•˜ë©´ ì»¬ë ‰ì…˜ì— ìˆëŠ” ìë£Œë“¤ì„ ì¢€ ë” ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

í™•ì¥í•¨ìˆ˜ì˜ ì¢…ë¥˜ëŠ” ì•„ì£¼ ë§ì§€ë§Œ, ìì£¼ ì‚¬ìš©í•  ê²ƒ ê°™ì€ ëª‡ ê°€ì§€ë§Œ ì‚´í´ë³´ì.

```kotlin
val list = listOf(1, 2, 3, 4, 5, 6)
// forEach: ê° ìš”ì†Œë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ ì²˜ë¦¬
list.forEach { i -> print(i) }
list.forEachIndexed { index, i -> println("index[$index]: $i") } // ì¸ë±ìŠ¤ í¬í•¨

// onEach: ê° ìš”ì†Œë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ ì²˜ë¦¬ í›„ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë°˜í™˜
val returnedList = list.onEach { print(it) }

val cities = listOf("Seoul", "Tokyo", "London")

// map()
val mapList = cities.map { city -> city.toUpperCase() }
println(mapList)

// mapNotNull(): nullì„ ì œì™¸í•˜ê³  ì‹ì„ ì ìš©í•´ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ ë°˜í™˜
val notnullList = cities.mapNotNull { city -> if(city.length <=5) city else null }
println(notnullList) // [Seoul, Tokyo]

// groupBy(): ì£¼ì–´ì§„ í•¨ìˆ˜ì˜ ê²°ê³¼ì— ë”°ë¼ ê·¸ë£¹í™”í•˜ì—¬ mapìœ¼ë¡œ ë°˜í™˜
val grpMap = cities.groupBy { city -> if (city.length <= 5) "A" else "B" }
println(grpMap) // {A=[Seoul, Tokyo], B=[London]}

// filter(): ì‹ì—ë”°ë¼ ìš”ì†Œë¥¼ ê³¨ë¼ë‚´ê¸°
cities.filter{ city -> city.length <= 5}
.forEach{ println(it) }

```

ì´ì™¸ì—ë„ ì•„ì£¼ ë§ë‹¤â€¦

- flatMap()
- distinct()
- intersect() : ê²¹ì¹˜ëŠ” ìš”ì†Œë§Œ ê³¨ë¼ëƒ„
- take(n) : ì»¬ë ‰ì…˜ì˜ ì•ì—ì„œë¶€í„° nê°œ ìš”ì†Œë¥¼ ë°˜í™˜í•œë‹¤.
- takeLast() : ë’¤ì—ì„œë¶€í„° nê°œ ìš”ì†Œë¥¼ ë°˜í™˜í•œë‹¤.
- takeWhile() : ì²« ë²ˆì§¸ ì¸ìë¶€í„° ì‹œì‘í•˜ì—¬ ì£¼ì–´ì§„ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì¸ìê¹Œì§€ë¥¼ í¬í•¨í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.
- takeLastWhile() : takeWhile() í•¨ìˆ˜ì™€ ë°˜ëŒ€ë¡œ ë’¤ì—ì„œë¶€í„° ì ìš©í•´ ë°˜í™˜í•œë‹¤.
- drop() : takeì™€ëŠ” ë°˜ëŒ€ë¡œ ì²˜ìŒë¶€í„° nê°œì˜ ìš”ì†Œë¥¼ ì œì™¸í•˜ê³  List ë°˜í™˜.
- first(), last() :  ì»¬ë ‰ì…˜ ë‚´ ì²« ë²ˆì§¸/ë§ˆì§€ë§‰ ì¸ìë¥¼ ë°˜í™˜í•œë‹¤.íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì²« ë²ˆì§¸/ë§ˆì§€ë§‰ ì¸ìë¥¼ ë°˜í™˜í•˜ë„ë¡ êµ¬ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
    - ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì¸ìê°€ ì—†ëŠ” ê²½ìš°ì—” NoSuchElementException ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ë©°, firstOnNull() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë„ ê°’ì„ ë°˜í™˜í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.
- joinToString() : ì»¬ë ‰ì…˜ì„ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ í•œ ë¬¸ìì—´ë¡œ ë°˜í™˜í•œë‹¤.
- any(), none() : ìë£Œì˜ ì¡´ì¬ì—¬ë¶€ë¥¼ ë°˜í™˜í•œë‹¤.

<br>


### ê¶ê¸ˆì 

ì½”í‹€ë¦° ì½”ë“œì—ì„œë„ .stream() ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•  ìˆ˜ëŠ” ìˆëŠ”ë°, ì´ëŠ” ì½”í‹€ë¦°ì˜ ìŠ¤íŠ¸ë¦¼ì´ ì•„ë‹ˆë¼ ìë°”ì˜ ìŠ¤íŠ¸ë¦¼.
streamì„ ìƒì„±í•˜ëŠ” ê²ƒ ë³´ë‹¤ í™•ì¥í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ ê²ƒì¼ê¹Œ?   


   
   ***ì½”í‹€ë¦° collectionì˜ í™•ì¥í•¨ìˆ˜ë“¤ì€ Streamì˜ ìµœì í™” ê¸°ìˆ ì¸ lazy, short circuitì´ ì ìš©ë˜ì§€  ì•ŠëŠ”ë‹¤.***  
(ìƒê°í•´ë³´ë©´ ë‹¹ì—°í•˜ë‹¤.  ë””ì»´íŒŒì¼ í•´ì„œ ë´ë„ ì•Œ ìˆ˜ ìˆì§€ë§Œ ë‹¨ìˆœíˆ ì»¬ë ‰ì…˜ì„ ë°˜ë³µë¬¸ì„ ëŒë ¤ì„œ ì²˜ë¦¬í•œ ê²ƒì´ë‹ˆê¹Œ)

> (ê°„ë‹¨íˆ)   
>lazy : ì–´ë–¤ ë¡œì§ì´ë‚˜ ì—°ì‚°ì„ ê·¸ ì¦‰ì‹œ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ì‹¤ì œë¡œ ì‚¬ìš©ë˜ê¸° ì „ê¹Œì§€ ë¯¸ë£¬ë‹¤. (ìµœì¢…ì—°ì‚°ì´ ìˆ˜í–‰ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¤‘ê°„ì—°ì‚°ì€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.)  
>short circuit : && ì—°ì‚°ì—ì„œ ì¢Œí•­ì´ falseì´ë©´ ë’¤ì˜ ì—°ì‚°ì€ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ê¸°ë²•.
> 

ì½”í‹€ë¦°ì—ì„œë„ lazy ì—°ì‚°ì„ ê°€ëŠ¥í•˜ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤.

---

### ì‹œí€€ìŠ¤ (Sequence)

```kotlin
// lazy ê°€ ì ìš©ë˜ì§€ ì•ŠëŠ” í™•ì¥í•¨ìˆ˜
    println("##### í™•ì¥í•¨ìˆ˜ #####")
    listOf(1, 2, 3, 4, 5, 6)
        .filter {
            println("filter: $it")
            it < 3
        }
        .map {
            println("map: $it")
            it * it
        }
        .any {
            println("any: $it")
            it > 2
        }
```
><ê²°ê³¼>  
filter: 1  
filter: 2  
filter: 3  
filter: 4  
filter: 5  
filter: 6  
map: 1  
map: 2  
any: 1  
any: 4
>

asSequence()ë¥¼ í†µí•´ ì‹œí€€ìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê³ ,  
ì‹œí€€ìŠ¤ë„ ë§ˆì°¬ê°€ì§€ë¡œ filter ë‚˜ map ê³¼ ê°™ì€ ë©”ì„œë“œë¥¼ ì²´ì´ë‹ í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  
ê²°ê³¼ë¥¼ ë³´ë©´ lazy ì—°ì‚°ì´ ìˆ˜í–‰ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.



```kotlin
// lazyê°€ ì ìš©ë˜ëŠ” ì‹œí€€ìŠ¤
    listOf(1, 2, 3, 4, 5, 6)
        .asSequence()   // ì´ ë¶€ë¶„ì„ ì¶”ê°€í•´ì„œ Sequence ë¡œ ë³€ê²½
        .filter {
            println("filter: $it")
            it < 3
        }
        .map {
            println("map: $it")
            it * it
        }
        .any {
            println("any: $it")
            it > 2
        }
```

>
<ê²°ê³¼>  
filter: 1  
map: 1  
any: 1  
filter: 2  
map: 2  
any: 4  
>

Collections ì€ ë§¤ í•¨ìˆ˜ì˜ ê²°ê³¼ë¡œÂ `Collection`Â ì„ ë°˜í™˜í•œë‹¤. ë§¤ë²ˆ ì „ë¶€ ì—°ì‚°ì„ í•˜ì—¬ ì¤‘ê°„ë‹¨ê³„ì˜ ê²°ê³¼ë¥¼ ë°”ë¡œ ë¦¬í„´í•œë‹¤.

Sequences ëŠ” ë§¤ í•¨ìˆ˜ì˜ ê²°ê³¼ë¡œÂ `Sequence`Â ë¥¼ ë°˜í™˜í•œë‹¤.  
ê·¸ë˜ì„œ ìµœì¢…ì ìœ¼ë¡œ Collection ìœ¼ë¡œ ë³€í™˜í•˜ë ¤ë©´ ë‹¤ì‹œÂ `toList()`Â ì™€ ê°™ì€ ìµœì¢…ì—°ì‚°ì„ í˜¸ì¶œí•´ì•¼ í•œë‹¤.  
ìµœì¢…ì—°ì‚°ì´ í˜¸ì¶œë˜ëŠ” ìˆœê°„ì— ëª¨ë“  ì—°ì‚°ì´ ìˆ˜í–‰ëœë‹¤.  

<br>

### ê¶ê¸ˆì 

ê·¸ëŸ¼ ì»¬ë ‰ì…˜ì˜ í™•ì¥í•¨ìˆ˜ë³´ë‹¤ sequenceë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ê°€?

â†’ Sequences ëŠ” ì¤‘ê°„ ë‹¨ê³„ì˜ ê²°ê³¼ë¥¼ ìƒëµí•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ í–¥ìƒì´ ë˜ì§€ë§Œ, ì˜¤ë²„í—¤ë“œê°€ ìˆê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ì ê±°ë‚˜ ì—°ì‚°ì´ ë‹¨ìˆœí•œ ì»¬ë ‰ì…˜ì„ ì²˜ë¦¬í•  ë•ŒëŠ” ì˜¤íˆë ¤ ì•ˆì¢‹ì„ ìˆ˜ê°€ ìˆë‹¤ê³  í•œë‹¤.

â†’ ì´í™í‹°ë¸Œ ì½”í‹€ë¦°ì— â€˜****í•˜ë‚˜ ì´ìƒì˜ ì²˜ë¦¬ë‹¨ê³„ë¥¼ ê°€ì§„ ê²½ìš°ì—ëŠ” ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¼â€™**** ë¼ëŠ” ë‚´ìš©ì´ ìˆë‹¤.