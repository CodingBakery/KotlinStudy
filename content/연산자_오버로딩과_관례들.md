> ì£¼ì œ: ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ê´€ë¡€  
> ì°¸ê³ ë„ì„œ: Kotlin in Action, ì½”í‹€ë¦° ì™„ë²½ ê°€ì´ë“œ

# ê°œìš”

## ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

ì½”í‹€ë¦° ë‚´ì¥ ì—°ì‚°ì(+, -, \* ë“±)ì— ìƒˆë¡œìš´ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥.

```kotlin
// ê³±í•˜ê¸° ì—°ì‚°ì(*) ì˜¤ë²„ë¡œë”©
fun main() {
    println("ì •ì˜ë˜ì§€ ì•Šì€ ì—°ì‚°ì€ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." * 3)
}

private operator fun String.times(s: Int): String {
    var result = ""
    for (time in 1..s)
        result += this
    return result
}
```

## ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ì´ ê°€ëŠ¥í•œ ì´ìœ 

ìë°”ì—ì„œëŠ” ì›ì‹œ íƒ€ì…ì— ëŒ€í•´ì„œë§Œ ì‚°ìˆ  ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ,  
ì½”í‹€ë¦°ì—ì„œ ì—°ì‚°ìë€ **í•¨ìˆ˜ í˜¸ì¶œì— ëŒ€í•œ í¸ì˜ ë¬¸ë²•**ì…ë‹ˆë‹¤.

-   ex. IntelliJì—ì„œ + ì—°ì‚°ìì˜ declerationìœ¼ë¡œ ì´ë™í•´ ë³´ë©´...
-   ì‹¤ì§ˆì ìœ¼ë¡œëŠ” plus()ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ìˆìŒ

```kotlin
// "ë¬¸ìì—´ë¼ë¦¬ì˜ " + "plus ì—°ì‚°ì ì˜¤ë²„ë¡œë”©"
public class String : Comparable<String>, CharSequence {
  // ...

    /**
     * Returns a string obtained by concatenating this string with the string representation of the given [other] object.
     */
    public operator fun plus(other: Any?): String

  // ...
}
```

ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ì€ ì½”í‹€ë¦°ì—ì„œì˜ **ê´€ë¡€**ì˜ ì¼ì¢…ì…ë‹ˆë‹¤.

## ê´€ë¡€

ì–´ë–¤ ì–¸ì–´ ê¸°ëŠ¥ì´ ì‚¬ìš©ìê°€ ì‘ì„±í•œ í•¨ìˆ˜ì™€ ì—°ê²°ë˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.  
ìë°”ëŠ” ì–¸ì–´ ê¸°ëŠ¥ì´ íƒ€ì…ê³¼ ì—°ê´€ë˜ëŠ” ë°˜ë©´ì—, (ex. Javaì˜ Iterableì„ êµ¬í˜„í•˜ë©´ for .. in êµ¬ë¬¸ ì‚¬ìš© ê°€ëŠ¥)  
ì½”í‹€ë¦°ì€ **íŠ¹ì • í•¨ìˆ˜ ì´ë¦„**ê³¼ ì—°ê´€ë©ë‹ˆë‹¤!

ì•ì„œ ì‚´í´ë³¸ ì—°ì‚°ì ì˜¤ë²„ë¡œë”© ì™¸ì—ë„ ê´€ë¡€ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ì˜ˆê°€ ìˆìŠµë‹ˆë‹¤.

# ì‚¬ìš© ë°©ë²•

í•¨ìˆ˜ ì•ì— operator í‚¤ì›Œë“œë¥¼ ë¶™ì—¬, ì •í•´ì§„ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¡œë”©í•©ë‹ˆë‹¤.

-   ì •í•´ì§„ í•¨ìˆ˜ì˜ ì´ë¦„ì€ plus, minusë“±ì´ ìˆìœ¼ë©° IntelliJì˜ declartion ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```kotlin
class Money(val value: Int) {
  operator fun plus(m: Money): Money {
    return Money(this.value + m.value)
  }
}
```

-   operator í‚¤ì›Œë“œë¥¼ ë¶™ì´ì§€ ì•Šìœ¼ë©´ ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤.

```kotlin
fun main() {
  val fourDollar = Money(4)
  val oneDollar = Money(1)

  // fourDollar - oneDollar ì‚¬ìš© ë¶ˆê°€ (minus í•¨ìˆ˜ì— operator í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•˜ë¼ëŠ” íˆ´íŒì´ í‘œì‹œë¨)
  fourDollar.minus(oneDollar)
}

class Money(val value: Int) {
  fun minus(m: Money): Money {
    return Money(this.value - m.value)
  }
}
```

ê°œìš”ì— ì†Œê°œëœ ì˜ˆì‹œì²˜ëŸ¼ í™•ì¥ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

-   ì™¸ë¶€ì—ì„œ ì‘ì„±ëœ í´ë˜ìŠ¤ì— ëŒ€í•œ ì—°ì‚°ìë¥¼ ì •ì˜í•˜ë ¤ë©´, í™•ì¥ í•¨ìˆ˜ë¡œ êµ¬í˜„
-   ì§ì ‘ ì‘ì„±í•œ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œë„ í™•ì¥ í•¨ìˆ˜ë¡œ êµ¬í˜„í•´ë„ ë¬¸ì œ ì—†ìŒ

```kotlin
fun main() {
  val fourDollar = Money(4)
  println("fourDollar * 3 == ${(fourDollar * 3).value} ë‹¬ëŸ¬")
}

operator fun Money.times(time: Int): Money {
    return Money(this.value * time)
}
```

êµí™˜ ë²•ì¹™ì„ ìë™ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

-   ì•ì—ì„œ ì •ì˜í•œ Money.timesì— êµí™˜ë²•ì¹™ì„ ì§€ì›í•˜ë ¤ë©´, Intì—ë„ Moneyë¥¼ ì¸ìë¡œ ë°›ëŠ” í™•ì¥í•¨ìˆ˜ë¥¼ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

```kotlin
fun main() {
  val fourDollar = Money(4)
  println("fourDollar * 3 == ${(fourDollar * 3).value} ë‹¬ëŸ¬")
}

operator fun Int.times(m: Money): Money {
    return Money(m.value * this)
}
```

```kotlin
fun main() {
  20 + "ë²ˆ" // ë¬¸ì œ ì—†ëŠ” ì‹ ê°™ì§€ë§Œ? 20ì˜ íƒ€ì…ì— ì •ì˜ëœ plus í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.
  // => 20ì´ Intì¸ì§€, Floatì¸ì§€ ì¶”ë¡ í•  ìˆ˜ ì—†ì–´.. ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ
}
```

## ì—°ì‚°ì ìš°ì„ ìˆœìœ„

í‘œì¤€ ìˆ«ì íƒ€ì…ì— ëŒ€í•œ ìš°ì„ ìˆœìœ„ì™€ ê°™ìŠµë‹ˆë‹¤.

-   <code>\*, /, %</code> > <code>+, -</code>

## ë³µí•© ëŒ€ì… ì—°ì‚°ì

ì´í•­ ì—°ì‚°ì <code>+</code>, <code>-</code>, <code>\*</code>, <code>/</code>ë¥¼ ì¬ì •ì˜í•˜ë©´,
<code>+=</code>, <code>-=</code>, <code>\*=</code>, <code>/=</code>ì™€ ê°™ì€ ë³µí•© ëŒ€ì… ì—°ì‚°ìë„ ìë™ìœ¼ë¡œ ì§€ì›ë©ë‹ˆë‹¤.

-   ë³µí•© ì—°ì‚°ìë„ ì•½ì†ëœ í•¨ìˆ˜ ì´ë¦„ì´ ìˆì–´ ë³µí•© ì—°ì‚°ìë§Œ ì˜¤ë²„ë¡œë”©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

    -   ex. plusAssign, minusAssign, timesAssign ...
    -   í•¨ìˆ˜ì˜ ì¸ìëŠ” 1ê°œ && ë°˜í™˜ íƒ€ì…ì€ Unit

-   ë‹¤ë§Œ, plusì™€ plusAssignì„ ëª¨ë‘ ì¬ì •ì˜í•œ ê²½ìš° ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.
    -   <code>+=</code>ì— ëŒ€ì‘ë˜ëŠ” ë©”ì†Œë“œê°€ 2ê°œë¡œ, ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í• ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸

```kotlin
fun main() {
    var balloon = Balloon(5)
    balloon *= 3  // ì»´íŒŒì¼ ì—ëŸ¬
}

class Balloon(var size: Int) {
    operator fun times(time: Int): Balloon {
        return Balloon(size * time)
    }

    operator fun timesAssign(time: Int) {
        size *= time
    }
}
```

## ìë°”ì™€ í•¨ê»˜ ì‚¬ìš©í•  ê²½ìš°

ì½”í‹€ë¦° ì—°ì‚°ìë¥¼ ìë°”ì—ì„œ í˜¸ì¶œ

-   í•¨ìˆ˜ëª…ìœ¼ë¡œ ì¼ë°˜ í•¨ìˆ˜ì²˜ëŸ¼ í˜¸ì¶œ

ìë°”ì— ì •ì˜ëœ í•¨ìˆ˜ë¥¼ ì½”í‹€ë¦° ì—°ì‚°ìë¡œ í˜¸ì¶œ (ê°€ëŠ¥ ğŸ˜®)

-   ìë°”ì—ì„œ operator í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ë©”ì†Œë“œ ì´ë¦„ + íŒŒë¼ë¯¸í„° ê°œìˆ˜ë§Œ ë§ì¶°ì£¼ë©´ í˜¸ì¶œ ê°€ëŠ¥.

```java
/** Level.java */
public class Level {

    private final int value;

    public Level(int value) {
        this.value = value;
    }

    public int getValue() {
        return value;
    }

    public Level plus(Level level) {
        return new Level(value + level.getValue());
    }
}
```

```kotlin
/** kotlin */
fun main() {
  val oneLevel = Level(1)
  val twoLevel = Level(2)
  println("oneLevel + twoLevel = ${oneLevel + twoLevel}")
}
```

## ì—°ì‚°ìì™€ í•¨ìˆ˜ ì´ë¦„

| ì—°ì‚°ì(=ì‹) | í•¨ìˆ˜ëª…            | ì—°ê´€ëœ ì—°ì‚°ì | í•¨ìˆ˜ëª…      |
| ----------- | ----------------- | ------------- | ----------- |
| a + b       | plus              | a += b        | plusAssign  |
| a - b       | minus             | a -= b        | minusAssign |
| a \* b      | times             | a \*= b       | timesAssign |
| a / b       | div               | a /= b        | divAssign   |
| a % b       | rem(1.1 ì´ì „ mod) | a %= b        | modAssign   |
| +a          | unaryPlus         |
| -a          | unaryMinus        |
| !a          | not               |
| ++a, a++    | inc               |
| --a, a--    | dec               |

## ë¹„êµ ì—°ì‚°ì

operator í‚¤ì›Œë“œë¥¼ ë¶™ì´ì§€ëŠ” ì•Šì§€ë§Œ, ë¹„êµ ì—°ì‚°ìë„ ì•½ì†ëœ ì´ë¦„ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
| ì—°ì‚°ì(=ì‹) | í•¨ìˆ˜ëª… |
| ----------- | ----------------- |
| ==, != | equals (ì»´íŒŒì¼ ê²°ê³¼ëŠ” ?.equals) |
| >, <, >=, <= | compareTo |

```kotlin
fun main() {
  // data í´ë˜ìŠ¤ - equals ìë™ ì¬ì •ì˜
  val fourDollar = Money(4)
  val saDollar = Money(4)
  println(saDollar == fourDollar)

  // equalsë¥¼ ì§ì ‘ ì¬ì •ì˜
  val smallBalloon = Balloon(1)
  val bigBalloon = Balloon(100)
  println(smallBalloon == bigBalloon)
}

class Balloon(var size: Int) {
    override fun equals(other: Any?): Boolean {
        return other is Balloon && size == other.size
    }
}

data class Money(val value: Int)
```

# ë˜ ë‹¤ë¥¸ ê´€ë¡€ë“¤

ì»¬ë ‰ì…˜ì„ ë‹¤ë£° ë•Œ ë§ì´ ì“°ì´ëŠ” ì—°ì‚°ì(<code>[]</code>, <code>in</code>)ë„ ì˜¤ë²„ë¡œë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì¸ë±ìŠ¤ ì—°ì‚°ì

```kotlin
fun main() {
  // Mapì—ì„œ ì¸ë±ìŠ¤ ì—°ì‚°ì ì‚¬ìš©
  val priceMap = mutableMapOf(Pair("ì˜¤ì´", 1500), Pair("ì–‘ë°°ì¶”", 3000), Pair("ìƒì¶”", 3000))
  println("ì˜¤ì´ 1ê°œ ê°€ê²©ì€ ${priceMap["ì˜¤ì´"]}")
  priceMap["ì–‘íŒŒ"] = 500
  println("ì–‘íŒŒ 1ê°œ ê°€ê²©ì€ ${priceMap["ì–‘íŒŒ"]}")

  // ì¸ë±ìŠ¤ ì—°ì‚°ì ì˜¤ë²„ë¡œë”© - ì›ì†Œë¥¼ ì½ëŠ” ì—°ì‚°ì í•¨ìˆ˜: get
  val person = Person("Kidel", "ê²Œì„")
  println("ì´ë¦„ì€ ${person["ì´ë¦„"]}")
  println("ì·¨ë¯¸ëŠ” ${person["ì·¨ë¯¸"]}")

  // ì¸ë±ìŠ¤ ì—°ì‚°ì ì˜¤ë²„ë¡œë”© - ì›ì†Œë¥¼ ëŒ€ì…í•˜ëŠ” ì—°ì‚°ì í•¨ìˆ˜: set
  person["ì·¨ë¯¸"] = "ë§›ì§‘íƒë°©"
  println("ë°”ë€ ì·¨ë¯¸ëŠ” ${person["ì·¨ë¯¸"]}")
}

class Person(var name: String, var hobby: String) {
    operator fun get(key: String): String {
        return when(key) {
            "ì´ë¦„" -> name
            "ì·¨ë¯¸" -> hobby
            else -> throw Exception("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í‚¤ê°’ì…ë‹ˆë‹¤")
        }
    }

    operator fun set(key: String, value: String) {
        return when(key) {
            "ì´ë¦„" -> name = value
            "ì·¨ë¯¸" -> hobby = value
            else -> throw Exception("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í‚¤ê°’ì…ë‹ˆë‹¤")
        }
    }
}
```

## in ì—°ì‚°ì

```kotlin
fun main() {
  // Mapì—ì„œ in ì—°ì‚°ì ì‚¬ìš©
  val priceMap = mutableMapOf(Pair("ì˜¤ì´", 1500), Pair("ì–‘ë°°ì¶”", 3000), Pair("ìƒì¶”", 3000))
  println("ì˜¤ì´ëŠ” priceMapì— ìˆëŠ”ê°€? ${"ì˜¤ì´" in priceMap}")

  // ìœ„ì„ì„ ì´ìš©
  val person = Person("Kidel", "ê²Œì„")
  val club = Club("ê²Œì„ë™ì•„ë¦¬", ArrayList())
  club.join(person)
  println("${person.name}ì€ ${club.name}ì— ê°€ì…í–ˆëŠ”ê°€? ${person in club}")

  // in ì—°ì‚°ì ì˜¤ë²„ë¡œë”© - ì›ì†Œë¥¼ ì½ëŠ” ì—°ì‚°ì í•¨ìˆ˜: contains
  val customClub = CustomClub("ê·¸ëƒ¥ë™ì•„ë¦¬", ArrayList())
  customClub.join(person)
  println("${person.name}ì€ ${customClub.name}ì— ê°€ì…í–ˆëŠ”ê°€? ${person in customClub}")

}

class Person(var name: String, var hobby: String)

class Club(var name: String, val memberList: ArrayList<Person>): List<Person> by memberList {
    fun join(person: Person) {
        memberList.add(person)
    }
}

class CustomClub(var name: String, val memberList: ArrayList<Person>) {
    fun join(person: Person) {
        memberList.add(person)
    }

    operator fun contains(person: Person): Boolean {
        return person in memberList
    }
}
```

## êµ¬ì¡° ë¶„í•´ ì„ ì–¸

ê´€ë¡€ë¥¼ ì‚¬ìš©í•˜ëŠ” íŠ¹ì„± ì¤‘ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ componentN í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

-   data í´ë˜ìŠ¤ë¡œ ì§€ì •í•˜ì—¬ ìë™ìœ¼ë¡œ componentN í•¨ìˆ˜ë¥¼ ì§€ì›í•˜ê±°ë‚˜,
-   componentN í•¨ìˆ˜ë¥¼ ì§ì ‘ ì˜¤ë²„ë¡œë”©í•˜ì—¬ êµ¬ì¡° ë¶„í•´ ì—°ì‚°ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```kotlin
fun main() {
    // data í´ë˜ìŠ¤ëŠ” êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ ìë™ìœ¼ë¡œ ì§€ì›
    val korea = Nation("Korea", "Korean")
    val (name, language) = korea
    println("korea :: name=${name}, language=${language}")

    // ì§ì ‘ ì˜¤ë²„ë¡œë”©
    val jammanboPerson = Person("ì ë§Œë³´", "ë‚®ì ")
    val (jbName, jbHobby) = jammanboPerson
    println("jammanboPerson :: jbName=${jbName}, jbHobby=${jbHobby}")

}

data class Nation(val name: String, val language: String)

class Person(var name: String, var hobby: String) {
    operator fun component1() = name
    operator fun component2() = hobby
}
```

## ìœ„ì„ í”„ë¡œí¼í‹°

ìœ„ì„ ê´€ë¡€ë¥¼ ë”°ë¥´ëŠ” í´ë˜ìŠ¤ì—ì„œëŠ” getValueì™€ setValue ë©”ì„œë“œë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.

-   <code>operator fun getValue(...) {...}</code>
-   <code>operator fun setValue(..., value: Type) {...}</code>

by í‚¤ì›Œë“œë¡œ ì„ ì–¸ëœ ìœ„ì„ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ê²½ìš°, ìœ„ì˜ getValue/setValue í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

## ê·¸ ì™¸ ì˜¤ë²„ë¡œë”© ê°€ëŠ¥í•œ ì—°ì‚°ìë“¤

-   operator í‚¤ì›Œë“œ í•„ìš”

| ì—°ì‚°ì(=ì‹)     | í•¨ìˆ˜ëª…   |
| --------------- | -------- |
| a .. b          | rangeTo  |
| for (a in list) | iterator |
